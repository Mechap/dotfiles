!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){"use strict";const o="object"==typeof window&&(window.browser||new function e(t){return new Proxy(t,{get:(t,n)=>"function"!=typeof t[n]?new e(t[n]):(...e)=>new Promise((o,r)=>{t[n](...e,e=>{chrome.runtime.lastError?r(new Error(chrome.runtime.lastError.message)):o(e)})})})}(window.chrome));t.a=o},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const o=/^(https?|wss?|file|ftp|\*):\/\/(\*|\*\.[^*/]+|[^*/]+)\/.*$|^file:\/\/\/.*$|^resource:\/\/(\*|\*\.[^*/]+|[^*/]+)\/.*$|^about:/,r="object"==typeof navigator&&navigator.userAgent.includes("Firefox/");function i(e){if(!o.test(e))throw new Error(e+" is an invalid pattern, it must match "+String(o));let[,t,n,i]=e.split(/(^[^:]+:[/][/])([^/]+)?/);return t=t.replace("*",r?"(https?|wss?)":"https?").replace(/[/]/g,"[/]"),n=(null!=n?n:"").replace(/^[*][.]/,"([^/]+.)*").replace(/^[*]$/,"[^/]+").replace(/[.]/g,"[.]").replace(/[*]$/g,"[^.]+"),i=i.replace(/[/]/g,"[/]").replace(/[.]/g,"[.]").replace(/[*]/g,".*"),"^"+t+n+"("+i+")?$"}function s(...e){return e.includes("<all_urls>")?/^(https?|file|ftp):[/]+/:new RegExp(e.map(i).join("|"))}},function(e,t,n){"use strict";function o(){return function(e){var t,n;const o={origins:[],permissions:[]},r=new Set([...null!==(t=e.permissions)&&void 0!==t?t:[],...(null!==(n=e.content_scripts)&&void 0!==n?n:[]).flatMap(e=>{var t;return null!==(t=e.matches)&&void 0!==t?t:[]})]);for(const e of r)e.includes("://")?o.origins.push(e):o.permissions.push(e);return o}(chrome.runtime.getManifest())}n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));const r=/:[/][/][*.]*([^/]+)/;function i(e){return e.split(r)[1]}async function s(e){return new Promise(t=>{chrome.permissions.getAll(n=>{const r=o();t(async function(e,t,{strictOrigins:n=!0}={}){var o,r;const s={origins:[],permissions:[]};for(const r of null!==(o=t.origins)&&void 0!==o?o:[])if(!e.origins.includes(r)){if(!n){const t=i(r);if(e.origins.some(e=>i(e)===t))continue}s.origins.push(r)}for(const n of null!==(r=t.permissions)&&void 0!==r?r:[])e.permissions.includes(n)||s.permissions.push(n);return s}(r,n,e))})})}},,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(11);var o=n(12);chrome.contextMenus.create({id:"change-icon-color",title:"Change icon colors",contexts:["page","page_action","browser_action"],documentUrlPatterns:["https://github.com/*","https://gitlab.com/*","https://*.gogs.io/*","https://*.gitea.io/*"]}),chrome.contextMenus.create({id:"toggle-dark-mode",title:"Toggle dark mode",contexts:["page","page_action","browser_action"],documentUrlPatterns:["https://github.com/*","https://gitlab.com/*","https://*.gogs.io/*","https://*.gitea.io/*"]}),(0,o.default)();var r=function(e){return function(t){var n=t[0];chrome.storage.sync.get(e,(function(t){var o;chrome.storage.sync.set(((o={})[e]=!t[e],o),(function(){return chrome.tabs.reload(n.id)}))}))}};chrome.contextMenus.onClicked.addListener((function(e){"change-icon-color"===e.menuItemId?chrome.tabs.query({active:!0,currentWindow:!0},r("colorsDisabled")):"toggle-dark-mode"===e.menuItemId&&chrome.tabs.query({active:!0,currentWindow:!0},r("darkMode"))})),chrome.tabs.onUpdated.addListener((function(e,t,n){var o;"complete"===(null==t?void 0:t.status)&&"github.com"===new URL(null!==(o=null==n?void 0:n.url)&&void 0!==o?o:"").hostname&&chrome.tabs.sendMessage(e,{message:"file-icon-extension-page-update"})}))},,function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(1);"object"!=typeof chrome||chrome.contentScripts||(chrome.contentScripts={async register(e,t){const{js:n=[],css:i=[],allFrames:s,matchAboutBlank:c,matches:a,runAt:u}=e,l=`document[${JSON.stringify(JSON.stringify({js:n,css:i}))}]`,d=Object(r.a)(...a),m=async(e,t,{url:r})=>{if(r&&d.test(r)&&await async function(e){return o.a.permissions.contains({origins:[new URL(e).origin+"/*"]})}(r)&&!await async function(e,t){const n=await o.a.tabs.executeScript(e,{code:t,runAt:"document_start"});return null==n?void 0:n[0]}(e,l)){for(const t of i)chrome.tabs.insertCSS(e,{...t,matchAboutBlank:c,allFrames:s,runAt:null!=u?u:"document_start"});for(const t of n)chrome.tabs.executeScript(e,{...t,matchAboutBlank:c,allFrames:s,runAt:u});chrome.tabs.executeScript(e,{code:l+" = true",runAt:"document_start",allFrames:s})}};chrome.tabs.onUpdated.addListener(m);const f={async unregister(){o.a.tabs.onUpdated.removeListener(m)}};return"function"==typeof t&&t(f),Promise.resolve(f)}});var i=n(2);const s=new Map;function c(e){return{file:new URL(e,location.origin).pathname}}async function a({origins:e}){const t=chrome.runtime.getManifest().content_scripts;for(const n of e||[])for(const e of t){const t=chrome.contentScripts.register({js:(e.js||[]).map(e=>c(e)),css:(e.css||[]).map(e=>c(e)),allFrames:e.all_frames,matches:[n],runAt:e.run_at});s.set(n,t)}}(async()=>{a(await Object(i.a)({strictOrigins:!1}))})(),chrome.permissions.onAdded.addListener(e=>{e.origins&&e.origins.length>0&&a(e)}),chrome.permissions.onRemoved.addListener(async({origins:e})=>{if(e&&0!==e.length)for(const[t,n]of s)e.includes(t)&&(await n).unregister()})},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return h}));var o=n(0),r=n(1);const i="object"==typeof chrome&&chrome&&"object"==typeof chrome.extension,s="object"==typeof window?window:void 0;"object"==typeof location&&location.protocol.startsWith("http");var c=n(2);const a="object"==typeof navigator&&navigator.userAgent.includes("Firefox/"),u="webext-domain-permission-toggle:add-permission";let l;async function d(e,t,...n){return o.a.tabs.executeScript(e,{code:`(${t.toString()})(...${JSON.stringify(n)})`})}async function m(e){if(a){const[t]=await d(e,()=>location.href);return t}return(await o.a.tabs.get(e)).url}async function f(e){const t={checked:!1,enabled:!0};if(e){const n=new URL(e).origin,i=Object(c.b)(),s=Object(r.a)(...i.origins).test(n);t.enabled=!s,t.checked=s||await async function(e){return o.a.permissions.contains({origins:[e+"/*"]})}(n)}chrome.contextMenus.update(u,t)}async function p({tabId:e}){f(await m(e).catch(()=>""))}async function g({checked:e,menuItemId:t},n){if(t===u)try{await async function(e,t){const n="The browser didn't supply any information about the active tab.";if(!e.url&&t)throw new Error("Please try again. "+n);if(!e.url&&!t)throw new Error("Couldn't disable the extension on the current tab. "+n);const r={origins:[new URL(e.url).origin+"/*"]};t?await o.a.permissions.request(r)?l.reloadOnSuccess&&d(e.id,e=>{confirm(e)&&location.reload()},l.reloadOnSuccess):chrome.contextMenus.update(u,{checked:!1}):o.a.permissions.remove(r)}(n,e)}catch(e){if(null==n?void 0:n.id){try{await d(n.id,"alert",String(e instanceof Error?e:new Error(e.message)))}catch(t){alert(e)}f()}throw e}}function h(e){if(!i||"/_generated_background_page.html"!==location.pathname&&(null===(n=null===(t=chrome.extension)||void 0===t?void 0:t.getBackgroundPage)||void 0===n?void 0:n.call(t))!==s)throw new Error("webext-domain-permission-toggle can only be called from a background page");var t,n;if(l)throw new Error("webext-domain-permission-toggle can only be initialized once");const{name:o,optional_permissions:r}=chrome.runtime.getManifest();if(l={title:`Enable ${o} on this domain`,reloadOnSuccess:`Do you want to reload this page to apply ${o}?`,...e},!chrome.contextMenus)throw new Error("webext-domain-permission-toggle requires the `contextMenu` permission");const c=null==r?void 0:r.filter(e=>/<all_urls>|\*/.test(e));if(!c||0===c.length)throw new TypeError("webext-domain-permission-toggle some wildcard hosts to be specified in `optional_permissions`");chrome.contextMenus.remove(u,()=>chrome.runtime.lastError),chrome.contextMenus.create({id:u,type:"checkbox",checked:!1,title:l.title,contexts:["page_action","browser_action"],documentUrlPatterns:c}),chrome.contextMenus.onClicked.addListener(g),chrome.tabs.onActivated.addListener(p),chrome.tabs.onUpdated.addListener(async(e,{status:t},{url:n,active:o})=>{o&&"complete"===t&&f(null!=n?n:await m(e).catch(()=>""))})}}]);